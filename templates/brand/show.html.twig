{% extends 'base.html.twig' %}

{% block title %}Profil de
	{{ brand.name }}

{% endblock %}

{% block body %}
	<main>
		<!-- Profile header -->
		<a href="{{ path('all_brands')}}" class="inline-flex justify-center px-4 py-2 mb-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500">
			<span>Retour</span>
		</a>
		<div>
			<div class="bg-dark" style="height:200px; width: auto; max-width:100%; position:relative; z-index:-1;"></div>
			<div class="max-w-5xl px-4 mx-auto sm:px-6 lg:px-8">
				<div class="-mt-12 sm:-mt-16 sm:flex sm:items-end sm:space-x-5">
					<div class="flex">
						{% if brand.profilePhoto %}
							<img class="w-24 h-24 rounded-full ring-4 ring-white sm:h-32 sm:w-32" src={{vich_uploader_asset(brand, 'imageFile')}} alt="">
						{% else %}
							<span class="inline-block overflow-hidden bg-gray-100 rounded-full h-14 w-14 sm:h-32 sm:w-32">
								<svg class="w-full h-full text-gray-300" fill="currentColor" viewbox="0 0 24 24">
									<path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"></path>
								</svg>
							</span>
						{% endif %}
					</div>
					<div class="mt-6 sm:flex-1 sm:min-w-0 sm:flex sm:items-center sm:justify-end sm:space-x-6 sm:pb-1">
						<div class="flex-1 min-w-0 mt-6 sm:hidden 2xl:block">
							<h1 class="text-2xl font-bold text-gray-900 truncate">
								{{brand.name}}
							</h1>
						</div>
						<div class="flex flex-col mt-6 space-y-3 justify-stretch sm:flex-row sm:space-y-0 sm:space-x-4">
							<button type="button" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500">
								<svg class="w-5 h-5 mr-2 -ml-1 text-gray-400" x-description="Heroicon name: solid/mail" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" fill="currentColor" aria-hidden="true">
									<path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
									<path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
								</svg>
								<span>Message</span>
							</button>
						</div>
					</div>
				</div>
				<div class="flex-1 hidden min-w-0 mt-6 sm:block 2xl:hidden">
					<h1 class="text-2xl font-bold text-gray-900 truncate">
						{{brand.name}}
					</h1>
					<p>
						@{{brand.username}}
					</p>
				</div>
			</div>
		</div>

		<!-- Tabs -->
		<div class="mt-6 sm:mt-2 2xl:mt-5">
			<div class="border-b border-gray-200">
				<div class="max-w-5xl px-4 mx-auto sm:px-6 lg:px-8"></div>
			</div>
		</div>

		<!-- Description list -->
		<div class="max-w-5xl px-4 mx-auto mt-6 sm:px-6 lg:px-8">
			Toutes les offres de
			{{brand.name}}</p>
			{% for offer in offers  %}
				{% if offer is not null %}
					<dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
						<div class="mb-3 card">

							<div class="card-body">
								<p>Nom :
									{{ offer.name|capitalize }}</p>
								<p>Description :
									{{ offer.description ? offer.description|slice(0, 50) : 'NC'}}
								</p>
								<p>Dates :
									{{ offer.dateStart ? offer.dateStart|date('m/d/Y') : 'NC'}}
									-
									{{ offer.dateEnd ? offer.dateEnd|date('m/d/Y') : 'NC'}}
								</p>
								<div class="card-action">

									{% set newArray = [] %}
									{% set var = [] %}

									{% for app in offerApplied %}
										{% if app.offer.id not in newArray %}
											{% if app.offer.id  == offer.id %}
												<div class="mb-3">
													<a href="{{ path('offer_show', {'id': offer.id}) }}" class="btn btn-link">Voir l'offre</a>
													<mark>Vous avez deja postuler a cette offre</mark>
												</div>
												{% set newArray = newArray|merge([app.offer.id]) %}
											{% endif %}
										{% endif %}
										{% if offer.id == app.offer.id %}
											{% set var = app.offer.id %}
										{% endif %}
									{% endfor %}

									{% if offer.id != var %}
										<a href="{{ path('offer_show', {'id': offer.id}) }}" class="btn btn-link">Voir l'offre</a>
									{% endif %}

								</div>
							</div>
						</div>
					</dl>
				{% endif %}
		{% else %}
			</dl>
			<dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
				<p class="text-sm font-medium text-gray-500">
					Pas d'offres pour le moment
				</p>
			</dl>

		{% endfor %}
		<div class="sm:col-span-1">
			<dt class="text-sm font-medium text-gray-500">
				Domaine
			</dt>
			<dd class="mt-1 text-sm text-gray-900">
				{% if brand.field is not empty %}
					{% for key, value in brand.field %}
						{{ value }}
					{% endfor %}
				{% endif %}
			</dd>
		</div>

		<div class="sm:col-span-2">
			<dt class="text-sm font-medium text-gray-500">
				Description
			</dt>
			<dd class="mt-1 text-sm text-gray-900 max-w-prose">
				<p>
					{{brand.description}}
				</p>
			</dd>
		</div>

		<div class="sm:col-span-1">
			<dt class="text-sm font-medium text-gray-500">
				RÃ©seaux Sociaux
			</dt>
			<dd class="mt-1 text-sm text-gray-900">
				{% if brand.socialNetwork is not empty %}
					{% for key, value in brand.socialNetwork %}
						<div class="flex">
							<p class="font-bold">{{ key }}
								:&nbsp;
							</p>
							<a href="{{ value }}">{{value }}</a>
						</div>
					{% endfor %}
				{% endif %}
			</dd>
		</div>
	</div>
</div></main>{% endblock %}
