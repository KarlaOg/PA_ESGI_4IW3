{% extends 'base.html.twig' %}

{% block title %}Offres
{% endblock %}

{% block body %}
	<h1>Listes des Offres</h1>
	<div>
		{% if offers is empty %}
			<p>Pas d'offres pour le moment</p>
		{% else %}

			{% for offer in offers  %}
				<div class="card mb-3">
					{% if brand is not null and offer.brandId.id == brand.id %}
						<div class="card-body">
							<p style="margin:10px 0">
								<mark>{{offer.status}}</mark>
							</p>
							<p>Nom :
								{{ offer.name|capitalize }}</p>
							<p>Description :
								{{ offer.description ? offer.description|slice(0, 50) : 'NC'}}
							</p>
							<p>Domaine :
								{{ offer.field ? offer.field|join(', ') : null}}
							</p>
							<p>Dates :
								{{ offer.dateStart ? offer.dateStart|date('m/d/Y') : 'NC'}}
								-
								{{ offer.dateEnd ? offer.dateEnd|date('m/d/Y') : 'NC'}}
							</p>
							{% if brand.name is not null %}
								<p>Cr√©er par
									{{brand.name}}</p>
							{% endif %}
							<a href="{{ path('offer_show', {'id': offer.id}) }}" class="waves-effect waves-light btn btn btn-primary">Voir l'offre</a>
						</div>
					{% endif %}
				</div>
				{% if app.user.roles[0] == "ROLE_INFLUENCEUR"  %}
					<div class="card mb-3">
						<div class="card-body">
							<p>Nom :
								{{ offer.name|capitalize }}</p>
							<p>Description :
								{{ offer.description ? offer.description|slice(0, 50) : 'NC'}}
							</p>
							<p>Dates :
								{{ offer.dateStart ? offer.dateStart|date('m/d/Y') : 'NC'}}
								-
								{{ offer.dateEnd ? offer.dateEnd|date('m/d/Y') : 'NC'}}
							</p>
							<div class="card-action">
								<a href="{{ path('offer_show', {'id': offer.id}) }}" class="btn-primary btn">Voir l'offre</a>
							</div>
						</div>
					</div>
				{% endif %}
			{% endfor %}
		{% endif %}
	</div>
{% endblock %}
